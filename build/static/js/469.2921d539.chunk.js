"use strict";(self.webpackChunkgruene_website=self.webpackChunkgruene_website||[]).push([[469],{1469:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var s=n(9379),i=n(5043),r=n(2382),l=(n(4430),n(9078),n(5394)),o=(n(3522),n(8248),n(2674)),a=n(579);const c=function(){const e=(0,i.useRef)(null),[t,n]=(0,i.useState)(null),[c,d]=(0,i.useState)(3),[u,h]=(0,i.useState)(3),[v,g]=(0,i.useState)(0),[p,m]=(0,i.useState)(null),[w,x]=(0,i.useState)(""),j={dots:!1,speed:500,slidesToShow:c,slidesToScroll:u,infinite:!1,autoplay:!1,autoplaySpeed:1e3,beforeChange:(e,t)=>{g(t)}},f=()=>{m(null)},b=e=>{let{content:t}=e;return(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})},D=async e=>{let t=[];try{var s=new Headers;s.append("Content-Type","application/json");var i=JSON.stringify({table:"".concat(e)});fetch("https://gruene-washington.de/SPPublicAPIs/getDataAll.php",{method:"POST",headers:s,body:i,redirect:"follow"}).then((e=>e.text())).then((e=>{var s;e=JSON.parse(e),t=null===(s=e)||void 0===s?void 0:s.data;let i=t.sort(((e,t)=>{if(e.EventDate&&t.EventDate){const n=new Date(e.EventDate);return new Date(t.EventDate)-n}return 0})).map((e=>(e.Description&&(e.Description=(e=>{try{const t=/href="[^"]*SmartId\s*=\d+[^"]*Item\s*=[^"]*"|href="[^"]*SmartID\s*=\d+[^"]*item1\s*=[^"]*"/gi;let n=null===e||void 0===e?void 0:e.replace(t,(e=>{let t;if(e.includes("item1=")){var n;t=null===(n=e.split("item1=")[1])||void 0===n?void 0:n.replace(/%20/g,"-")}else{if(!e.includes("Item="))return e;var s;t=null===(s=e.split("Item=")[1])||void 0===s?void 0:s.replace(/%20/g,"-")}return'href="https://gruene-washington.de/'.concat(t,'"')}));const s=/sites\/GrueneWeltweit\/washington\/public\//g,i="";return n=n.replace(s,i),n}catch(t){return console.log(t),e}})(e.Description)),e)));n(i)})).catch((e=>console.log("error",e)))}catch(r){console.error("An error occurred:",r)}return t};return(0,i.useEffect)((()=>{(async()=>{try{await D("".concat("events"))}catch(e){console.log("An error occurred while fetching data.")}})()}),[]),(0,i.useEffect)((()=>{const e=()=>{window.innerWidth<768?(d(1),h(1)):window.innerWidth<1200?(d(2),h(2)):(d(3),h(3))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.jsxs)("div",{className:"section NewsCardSection",children:[(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"section-header",children:[(0,a.jsx)("h2",{className:"sectionHeading",children:"Events"}),(0,a.jsxs)("div",{className:"pull-right",children:[(0,a.jsx)("button",{onClick:()=>{e.current&&v>0&&(g((e=>e-1)),e.current.slickPrev())},className:"button_color",disabled:0===v,children:(0,a.jsx)(l.pRN,{})}),(0,a.jsx)("button",{onClick:()=>{e.current&&v<t.length-j.slidesToShow&&(g((e=>e+1)),e.current.slickNext())},className:"button_color",disabled:v===(null===t||void 0===t?void 0:t.length)-j.slidesToShow,children:(0,a.jsx)(l.zBw,{})})]})]}),(0,a.jsx)(r.A,(0,s.A)((0,s.A)({ref:e},j),{},{children:t&&t.map((e=>{var t,n,s,i;return(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"card border-0",children:[(0,a.jsx)("img",{className:"card-img-top",src:""==(null===e||void 0===e?void 0:e.ItemCover)?"https://gruene-washington.de/PublishingImages/Covers/Default_img.jpg":null!==(t=null===e||void 0===e?void 0:e.ItemCover)&&void 0!==t?t:"https://gruene-washington.de/PublishingImages/Covers/Default_img.jpg"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"entry-meta",children:[(0,a.jsx)(l.nih,{}),(0,a.jsx)("span",{children:null!==e&&void 0!==e&&e.EventDate?(i=null===e||void 0===e?void 0:e.EventDate,new Date(i).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})):""})]}),(0,a.jsx)("h4",{className:"card-title",onClick:()=>{return m(t=e),void x("https://www.gruene-washington.de/Veranstaltungen/".concat(null===t||void 0===t?void 0:t.Title));var t},children:(0,a.jsxs)("a",{children:[" ",null===e||void 0===e?void 0:e.Title]})}),(null===e||void 0===e||null===(n=e.Description)||void 0===n?void 0:n.length)>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"eventItemDesc cutoff-text",children:(0,a.jsx)("p",{children:(0,a.jsx)(b,{content:null===e||void 0===e?void 0:e.Description})})}),!((null===e||void 0===e||null===(s=e.Description)||void 0===s?void 0:s.length)<=200)&&(0,a.jsx)("input",{className:"expand-btn",type:"checkbox"})]})]})]})},e.id)}))}))]}),p&&(0,a.jsx)(o.A,{selectedEvent:p,onClose:f,url:w})]})}}}]);
//# sourceMappingURL=469.2921d539.chunk.js.map